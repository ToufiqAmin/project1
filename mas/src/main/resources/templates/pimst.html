<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!-->
<html xmlns:th="http://www.thymeleaf.org">
<!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>PI Info</title>
    <meta name="description" content="Sufee Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

   

    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/themify-icons.css">
    <link rel="stylesheet" href="/css/flag-icon.min.css">
    <link rel="stylesheet" href="/css/cs-skin-elastic.css">
    <link rel="stylesheet" href="/css/lib/datatable/dataTables.bootstrap.min.css">
    <link rel="stylesheet" href="/scss/style.css">

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

   
       

    <style type="text/css">
       
       #calculate{
     display:none;
     }
    
        .modal-backdrop.show {
            display: none;
        }

        .modal-backdrop.fade {
            display: none;
        }

/*
        div.dataTables_wrapper {
            width: 100%;
        }
*/
		.selected{
			background-color: #eee;
			color: #000;
		}
		
		.dataTables_length, .dataTables_filter {
			display: none !important;
		}
    </style>
    
    
    <style>
.custom-header-panel{
    background-color: #004b8e !important;
    border-color: #004b8e !important;
    color: white;
}


.panel {
  padding: 15px;
  margin-bottom: 20px;
  background-color: #ffffff;
  border: 1px solid #dddddd;
  border-radius: 4px;
  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
}

.panel-heading {
  padding: 10px 15px;
  margin: -15px -15px 15px;
  font-size: 17.5px;
  font-weight: 500;      
  background-color: #f5f5f5;
  border-bottom: 1px solid #dddddd;
  border-top-right-radius: 3px;
  border-top-left-radius: 3px;
}

.panel-footer {
  padding: 10px 15px;
  margin: 15px -15px -15px;
  background-color: #f5f5f5;
  border-top: 1px solid #dddddd;
  border-bottom-right-radius: 3px;
  border-bottom-left-radius: 3px;
} 

.panel-primary {
  border-color: #428bca;
}

.panel-primary .panel-heading {
  color: #ffffff;
  background-color: #428bca;
  border-color: #428bca;
}
/* This kinda of works but now 
.panel, .panel-group .panel-heading+.panel-collapse>.panel-body{
    border: none;
}
*/
.card-header{
    /* background-color: #004b8e !important; */
    background-color: #004b8e !important;
    border-color: #004b8e !important;
    color: white;

    padding: 10px 15px;
  /*margin: -15px -15px 15px; */

  font-size: 17.5px;
  font-weight: 500;      
  background-color: #f5f5f5;
  border-bottom: 1px solid #dddddd;
  border-top-right-radius: 3px;
  border-top-left-radius: 3px;
}


 <style type="text/css">
       
       #calculate{
      display:none;
     }
    
        .modal-backdrop.show {
            display: none;
        }

        .modal-backdrop.fade {
            display: none;
        }

/*
        div.dataTables_wrapper {
            width: 100%;
        }
*/
		.selected{
			background-color: #eee;
			color: #000;
		}
		
		.dataTables_length, .dataTables_filter {
			display: none !important;
		}
    </style>
</style>


</head>

<body>
    
			<!-- Left Panel -->

	<aside id="left-panel" class="left-panel">
		<nav class="navbar navbar-expand-sm navbar-default">

			<div class="navbar-header">
				<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-menu" aria-controls="main-menu" aria-expanded="false" aria-label="Toggle navigation">
					<i class="fa fa-bars"></i>
				</button>
				<a class="navbar-brand" href="./">MLFM</a>
				<a class="navbar-brand hidden" href="./">BD</a>
			</div>

			<div id="main-menu" class="main-menu collapse navbar-collapse">
				<ul class="nav navbar-nav">
				
			
                
   <li class="menu-item-has-children dropdown" >
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
               <i class="menu-icon fa fa-laptop"></i>    Set Up
          </a>
        
       <ul class="sub-menu children dropdown-menu" aria-labelledby="navbarDropdown" >
             <li th:each="s:${listModelUserObjectSetup}" 
                   th:value="${s.userObjectId}">
            <a class="dropdown-item" th:href="@{${s.modelObject.filePath}+'/'+${s.modelUser.userId}}" >
               
                    <span th:utext="${s.modelObject.objectName}">
                   </span>
                </a>
            </li>
          
        </ul>
        
   </li>
   
      
	 <li class="menu-item-has-children dropdown">
     
       <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              <i class="menu-icon fa fa-laptop"></i> Transaction
        </a>
        
           <ul class="sub-menu children dropdown-menu" aria-labelledby="navbarDropdown">
              <li th:each="t:${listModelUserObjectTransaction}"
                   th:value="${t.userObjectId}">
                   
                   <a class="dropdown-item" th:href="@{${t.modelObject.filePath}+'/'+${t.modelUser.userId}}" >
                 
                         <span th:utext="${t.modelObject.objectName}">
                         </span>
                      </a>
              </li>
          </ul>
      </li>			
				
        	
		   	
		<li class="menu-item-has-children dropdown">
     
             <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <i class="menu-icon fa fa-laptop"></i>   Tools
             </a>
        
            <ul class="sub-menu children dropdown-menu" aria-labelledby="navbarDropdown">
                <li th:each="u:${listModelUserObjectTool}"
                     th:value="${u.userObjectId}">
                     
                           <a class="dropdown-item" th:href="@{${u.modelObject.filePath}+'/'+${u.modelUser.userId}}" >
                 
                    <span th:utext="${u.modelObject.objectName}">
                    </span>
                 </a>
               </li>
          
            </ul>
       </li>	


		<li class="menu-item-has-children dropdown">
     
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="menu-icon fa fa-laptop"></i> Report
              </a>
        
              <ul class="sub-menu children dropdown-menu" aria-labelledby="navbarDropdown">
                   <li th:each="r:${listModelUserObjectReport}"
                        th:value="${r.userObjectId}">
                        <a class="dropdown-item" th:href="@{${r.modelObject.filePath}+'/'+${r.modelUser.userId}}" >
                     <!--  <a class="dropdown-item" th:href="${r.modelObject.filePath}"> -->
                           <span th:utext="${r.modelObject.objectName}">
                           </span>
                       </a>
                   </li>
          
              </ul>
        </li>	
					
					
					
	             </ul>
			</div>
		</nav>
	</aside>



	<!-- Left Panel -->
				

    <!-- Right Panel -->

    <div id="" class="right-panel">

       	<!-- Header-->
		<header id="header" class="header">

			<div class="header-menu">
<!--
				<div class="col-sm-4">
					<a id="menuToggle" class="menutoggle pull-left"><i class="fa fa fa-tasks"></i></a>
					<div class="header-left">
						<button class="search-trigger"><i class="fa fa-search"></i></button>
						<div class="form-inline">
							<form class="search-form">
								<input class="form-control mr-sm-2" type="text" placeholder="Search ..." aria-label="Search">
								<button class="search-close" type="submit"><i class="fa fa-close"></i></button>
							</form>
						</div>

					</div>
				</div>
-->
		<!--
				<div class="col-sm-5">
					<div class="user-area dropdown float-right">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <img class="user-avatar rounded-circle" src="images/admin.jpg" alt="User Avatar">
                        </a>

						<div class="user-menu dropdown-menu">
							<a class="nav-link" href="#"><i class="fa fa- user"></i>My Profile</a>
							
							<input type="text" class="nav-link" th:value="${userId}" id="accessUserId" readonly>

							<a class="nav-link" href="/logoncontroller/init"><i class="fa fa-power -off"></i>Logout</a>
						</div>
					</div>
                </div>
         -->       
                  
                        <div class="col-sm-4 text-right" >
                         
                      </div> 
               
                       <div class="col-sm-8 text-right" >
                          
                           <a class="nav-link" href="/logoncontroller/init"  style="float:right;" ><i class="fa fa-power -off"></i>Logout</a>
                            <span class="nav-link" th:text="${name}"readonly style="color: black; float:right; padding-left:5px;"></span>  
                            <span class="nav-link" style="color: black; float:right; padding-right:0px;">User : </span>  
                           
                          
                         
                       </div>
                 
			</div>

		</header><!-- /header -->
		<!-- Header-->
		
        
       
    <!--     <div class="up-msg">
			<div class="col-sm-6 text-left">
				<input type="text" id="displayMessage" name=""  readonly style="color: limegreen; display: block;border:0px">
			</div>
		</div> --> 
		
		 <div class="up-msg">
			<div class="col-sm-6 text-left">
				<input type="text" id="displayMessage" name="msg" placeholder="Message" th:value="${message}"readonly style="color: limegreen; display: block">
			</div>
		
		</div>
        
        <br>
        <br>
       
        
        
        <div class="container">

 <!-- <div class="row">  -->


<!-- <div class="col-md-offset-2 col-md-8"> -->
	
    <div class="panel">
      <div class="panel-heading custom-header-panel">
          <h5 class="panel-title roboto">Search</h3>
      </div>
  <div class="panel-body">



  <!-- <h3> Patient Registration </h3>   -->
  
     
         	<div class="row">
                	<!--  	 <form id="searchForm" class="needs-validation" th:action="@{/workorder/mst/search}" style="width:100%;"  novalidate>  -->
                   	 <form id="searchForm" class="needs-validation"  style="width:100%;"  novalidate>
                    
                      <div class="col-2">
						 <div class="form-group">
							<label for="ownerType" class="control-label mb-1">Owner Type</label>
							 <select name="ownerType" id="ownerType" class="form-control" aria-required="true" aria-invalid="false"required>															
	<!--							
								<option value=" ">Choose Type</option>
	-->	
									<option th:each="type:${ownerTypeList}"
											th:value="${type.orderOwnerTypeId}"
											th:utext="${type.orderOwnerTypeName}"
																				
											/>
																				
							 </select>
						  </div>
					 </div>
					 
					 
					 <div class="col-2">
						 <div class="form-group">
							<label for="owner" class="control-label mb-1">Buyer</label>
								<select name="owner" id="owner" class="form-control" placeholder="Select" >
									<option value=" "> Select Buyer</option>
										 <!-- 	<option th:each="owner:${ownerList}"
												th:value="${owner.orderOwnerId}"
												th:utext="${owner.ownerName}"
													
										/>-->
								</select>
							</div>
						</div>
					 
						
					                <!--  <div class="col-3">
										<div class="form-group">
											<label>Initial Buyer</label>
											<input type="text" class="form-control" placeholder="Int. Buyer" name="owner">
										</div>
									</div>-->
                      
                     <div class="col-2">
						<div class="form-group">
							<label for="ultimateOwner" class="control-label mb-1">Ultimate Buyer</label>
								<select  id="ultimateOwner" name="ultimateOwner" class="form-control" placeholder="Select">
									<option value=" "> Select Ultimate Buyer</option>
										<option th:each="owner:${ownerList}"
											th:value="${owner.ownerName}"
											
												th:text="|${owner.ownerName} ( ${owner.orderOwnerType.orderOwnerTypeName} )|"
																				
												/>
																				
								</select>
						 </div>
					 </div>
                      
                     <div class="col-2">
				<div class="form-group">
				<label for="user" class="control-label mb-1">User</label>
					<select name="user" id="user"  class="form-control" placeholder="Select" required>
						<option value=" "> Select User</option>
																				
						<option th:each="u:${userList}"
								th:value="${u.userId}"
								th:utext="${u.userName}"																			
						   /> 
						</select>
																		
					 </div>
				   </div> 
				                         
                      <div class="col-2">
									<div class="form-group">
									<label for="cluster" class="control-label mb-1">Cluster</label>
									<select name="cluster" id="cluster"  class="form-control" placeholder="Select"  required>
										<option value=" "> Select Cluster</option>								  	  
														
								</select>
							 <div class="invalid-feedback">
								 Please input User Cluster
							</div>
						</div>
					  </div>
					  
					  <div class="col-2">
						<div class="form-group">
							<label  class="control-label mb-1">From Date</label>
									<input type="date" class="form-control" id="startdate" name="work_start_date">
						</div>
					  </div>
					  
					  <div class="col-2">
						<div class="form-group">
							<label  class="control-label mb-1">To Date</label>
									<input type="date" class="form-control" id="enddate" name="work_end_date">
						</div>
					  </div>
					  
					  	<div class="col-1">
									<div class="form-group">
										<label class="control-label mb-1">PI</label>
														<!-- Default checked -->
										<div class="custom-control custom-checkbox">
											  <input type="checkbox" class="custom-control-input" id="defaultChecked1" name ="picheck" >
											<label class="custom-control-label" for="defaultChecked1"></label>
										</div>
														
									</div>
						</div>
						
						<div class="col-2.5">
						<div class="form-group">
						    <label  class="control-label mb-1"> &nbsp; </label><br/>
						   
							<a href="#">User's No. of inquires:</a>
						</div>
					   </div>
					  
					  <div class="col-2">
						<div class="form-group">
						    <label  class="control-label mb-1"> &nbsp; </label><br/>
						   
							<a href="#">Users all inquiry list</a>
						</div>
					  </div>
                      
                      <div class="col-3">
                            <div class="form-group">
                                <label for="" class="control-label mb-1"></label>
                                
                                <input type="button" id="btnsearch" value="Search" class="btn btn-primary btn-sm" style="margin-top: 22px"> 
                               <!--   <input style="margin-top: 7px" id="btnsearch" type="submit" value="Search" class="form-control btn-primary btn-sm" aria-required="true" aria-invalid="false" name="" placeholder="Name" >-->
                               <a class="btn btn-success btn-sm" style="margin-top: 22px" th:href="@{'/pimst/init/'+${userId}}">Refresh</a>
                            </div>

                       </div>
                       
                   <!--     <div class="col-2">
                            <div class="form-group">
                            <label for="" class="control-label mb-1"></label><br/>
                               <a class="btn btn-primary btn-sm" style="margin-top: 7px" th:href="@{/pimst/init}">Refresh</a>
                            </div>

                       </div>--> 
                       
                       
              
             
                    </form>
                </div> 
                
                
                
                <div class="row">

                    <div class="col-12">
                    	<div class="card table-container" style="width: 1070px; overflow-x: scroll">
                    	     <div class="card-header">
								<strong class="card-title">WO-MST</strong>
								<input type="hidden" id="orderIdFromTable" value="0" readonly>
								<input type="hidden" id="mstidTable" value="0" readonly>
							 </div>
							
                    		<div class="card-body">
                    		<div id="searchsub">
                    			<table id="myTable"  class="table table-striped table-bordered display nowrap" style="width:100%">
                                    <thead>
										<tr>
										    <th scope="col">Select</th>
										   <!--   <th scope="col">Owner Id</th>-->
										    <th scope="col">Buyer/Other Name</th>	
											<th scope="col">WO Mst ID</th>
											<th scope="col">WO Date</th>
																			
											
										
										</tr>
									</thead>
                                    <tbody>
                                     <!--  
                                       <tr th:each="workOrder:${workOrderList}" >
                                         <td ><center><input type="checkbox" id="selectcheck"  onclick="myFunction2()" ></center> </td>
                                        <td><span th:text="${workOrder.ownerName}"></span></td>
                                         <td scope="row"><a type="text" th:href="@{/workmst/workchd/search/{id}(id=${workOrder.woMstId})}" th:text="${workOrder.woMstId}"></a></td>
                                         <td><span th:text="${#calendars.format(workOrder.woDate, 'M/dd/yyyy')}"></span></td>
                                         
                                        
                                       
                                       </tr>
                                       
                                       -->   
                                        
                                        <!--================ tr here======================== -->

                                    </tbody>
                                </table>
                                </div>
                    		</div>
                    		
                    		 
                    	
                    	</div>

                         </div>

                     </div>
                     
                     
                    <div class="row">

                    <div class="col-12">
                    	<div class="card table-container" style="width: 1070px; overflow-x: scroll">
                    	     <div class="card-header">
								<strong class="card-title">WO-Child</strong>
								<input type="hidden" id="wochdid" value="0" readonly>
							</div>
                    		<div class="card-body">
                    			<table id="wochdTable" class="table table-striped table-bordered display nowrap" style="width:100%">
                                    <thead>
										<tr>
										    <th scope ="col" name="row_id">Select</br><center><input type="checkbox" class="select_all" id="myCheck"/></center></th>
											<th scope="col">WO Chd ID</th>
											<th scope="col">WO Mst ID</th>	
											<th scope="col">Order Item Qty ID</th>										
											<th scope="col">Inquiry ID</th>			
											<th scope="col">Buyer Name</th>
											<th scope="col">Item Name</th>											
											<th scope="col">WO Qty</th>
											<th scope="col">Saved PI</th>
											<th scope="col">UOM</th>
											<th scope="col">Rate</th>
											<th scope="col">Curency</th>
											<th scope="col">Commission/<span style="font-size:9px">UOM</span></th>
											<th scope="col">Sub Total</th>
											<th scope="col">Total Commission</th>
											
										</tr>
									</thead>
                                    <tbody>
                                        
                                    <!--   <tr th:each="workchd:${wochdList}" >
                                     
                                         <td><center><input type="checkbox"></center></td>
                                         <td scope="row"><span th:text="${workchd.woChdId}"></span></td>
                                         <td scope="row"><span th:text="${workchd.modelWOMst.woMstId}"></span></td>
                                         <td scope="row"><span th:text="${workchd.modelOrderItemQty.orderItemQtyId}"></span> 
                                         <td scope="row"><span th:text="${workchd.modelOrderItemQty.modelOrderItem.modelOrder.orderId}"></span> 
                                         <td scope="row"><span th:text="${workchd.modelWOMst.modelOrderOwner.ownerName}"></span></td> 
                                         <td scope="row"><span th:text="${workchd.modelOrderItemQty.modelOrderItem.listModelItem.itemName}"></span>
                                         <td scope="row"><span th:text="${workchd.itemQty}"></span></td>
                                      
                                     </tr>-->
                                       

                                    </tbody>
                                                                        
                                </table>
                                <div class="row">
                                	<div class="col-md-10">                              
                         	         
						             </div>
                                    <div class="col-md-2">
                                    <form class="form-inline">
                                     <div class="form-group">
                                     <label for="exampleInputName2">Total : </label>
                                     <input type="text" class="form-control" aria-required="true" aria-invalid="false" id="wochdtotal"  style="float:right; width:100px" placeholder="Total" readonly/>
                                    </div>
                                    </form>                        	         
                         	         
						            </div>
                                 </div>
                    		</div>
                    	</div>

                         </div>

                     </div>  
                     
                     <div class="row">
                         <div class="col-md-6">
                         	 <a href="#" type="button" class=" btn btn-success" data-toggle="modal" data-target="#largeModal1">
	  													PI
						      </a>
                         </div>    
                         <div class="col-md-6 text-right">
                         	 <a type="submit" class=" btn btn-success" id="pimst">
	  													Show Inused PI
						      </a>
                         </div>                                    
                     </div>
                     
                     
                     <br/>
                     
                     <div class="row">

                    <div class="col-12">
                    	<div class="card table-container" style="width: 1070px; overflow-x: scroll">
                    	     <div class="card-header">
								<strong class="card-title">PI-Master</strong>
							</div>
                    		<div class="card-body">
                    			<table id="pimstTable" class="table table-striped table-bordered display nowrap" style="width:100%">
                                    <thead>
										<tr>
										  
											<th scope="col">PI MST ID</th>
									 		<th scope="col" width="120">PI Date</th>													
											<th scope="col" width="120">PI Type</th>
											<th scopre="col" hidden>Owner ID</th>
											<th scopre="col">Buyer Name</th>
											<th scope="col">PI Terms</th>
											<th scope="col">Chd Populate</th>
											<th scope="col">Action</th>
															
										</tr>
									</thead>
                                    		<tbody>
                                        
                                                 
                                       

                                   			 </tbody>
                                </table>
                    		</div>
                    		
                    		<!--   <div class="card-footer">
                    			<div class="row">
                    				<div class="col-md-10">
                    				</div>
                    				<div class="col-md-2">
                    					 <a hre="#" class="btn btn-primary pull-right" style="display:block; width:100%;">Data Populate</a>
                    					<button class="btn btn-success">Child Data Populate</button>
                    				</div>
                    			</div> -->
                    		</div>
                    	</div>

                         </div>

                     </div>
                     
                     
                     
                     
                     <div class="row">

                    <div class="col-12">
                    	<div class="card table-container" style="width: 1070px; overflow-x: scroll">
                    	     <div class="card-header">
								<strong class="card-title">PI-Child</strong>							
                                <a type="submit" class=" btn btn-success" style="float:right" id="clearpichd">
	  													Clear Chd Data
						      </a>                       

							</div>
                    		<div class="card-body">
                    			<table id="pichdTable" class="table table-striped table-bordered display nowrap" style="width:100%">
                                   <tbody>
                                    <thead>
										<tr>
										    <th scope="col" hidden>Select</th>
											<th scope="col"> PI Chd   ID</th>
											<th scope="col">PI Mst ID</th>
											<th scope="col" >WO Mst ID  </th>
											<th scope="col" >WO Chd ID  </th>
											<th scope="col" >Order Item Qty ID </th>
											<th scope="col">Inquiry ID </th>
											<th scope="col">Item Name</th>
											<th scope="col">WO Qty</th>
											<th scope="col"> Saved PI</th>
											<th scope="col">PI Qty</th>
											<th scope="col">UOM</th>
											<th scope="col" hidden width="120">UOM ID</th>
											<th scope="col">Rate</th>
											<th scope="col">Currency</th>
											<th scope="col">Commission/<span style="font-size:9px">UOM</span></th>
											<th scope="col">Sub Total</th>
											<th scope="col">Commission Total</th>
											<th scope="col">Action</th>
											
										</tr>
									</thead>
								</tbody>
                                   
                                    
                                </table>
                                <div class="row">
                                	<div class="col-md-9">                              
                         	         
						             </div>
                                    <div class="col-md-3">
                                    <form class="form-inline" style="float:right">
                                     <div class="form-group text-right">
                                    <input type=button id="calculate" class="btn-warning" value="Calculate">
                                     <label for="exampleInputName2" >Total : </label>
                                     
                                     <input type="text" class="form-control" aria-required="true" aria-invalid="false" name="pichdtotal" id="pichdtotal" style="float:right; width:100px" placeholder="Total" readonly/>
                                    </div>
                                    </form>
                         	         <br>
                         	         <a href="#" type="button" id="savepichd" class=" btn btn-success" style="float:right">
	  													Save Chd Data
						            </a>
						            </div>
                                 </div> 
                    		</div>
                    	</div>

                         </div>

                     </div>
                     
                     

                </div>

            </div>
            
            
   
    
    
    <!-- ====================================Start Audit Modal================================================= -->
           
    <div class="modal fade" id="smallmodalAudit111111" tabindex="-1" role="dialog" aria-labelledby="smallmodalLabel" aria-hidden="true">
															<div class="modal-dialog modal-sm" role="document">
																<div class="modal-content">
																	<div class="modal-header">
																		<h5 class="modal-title" id="smallmodalLabel" style="color: #000">Entry info</h5>
																		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
																			<span aria-hidden="true">&times;</span>
																		</button>
																	</div>
																	<div class="modal-body">

																		<div class="row">
																			<div class="col-12">
																				<div class="form-group">
																					<label for="cc-payment" class="control-label mb-1">Entered By</label>
																					<p>Jamal Khan</p>
																				</div>
																			</div>
																		</div>
																		<div class="row">
																			<div class="col-12">
																				<div class="form-group">
																					<label for="cc-payment" class="control-label mb-1">Entered Time</label>
																					<p>2:30 am</p>
																				</div>
																			</div>
																		</div>
																		<div class="row">
																			<div class="col-12">
																				<div class="form-group">
																					<label for="cc-payment" class="control-label mb-1">Update By</label>
																					<p>active</p>
																				</div>
																			</div>
																		</div>

																		<div class="row">


																			<div class="col-12">
																				<div class="form-group">
																					<label for="cc-payment" class="control-label mb-1">Update Time</label>
																					<p>active</p>
																				</div>
																			</div>
																		</div>
																	</div>

																</div>
															</div>
														</div>
								
<!-- ====================================End Audit Modal================================================= -->

    
    <!--=====================================================================
				pi modal
=====================================================================-->
	<div class="modal fade" id="largeModal1" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content" style="z-index: 1000000000000">
				<div class="modal-header">
					<h5 class="modal-title" id="largeModalLabel">PI-MST</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form  method="post" th:object="${PIMst}"  th:action="@{/PIMst/save}" novalidate="novalidate">

						<div class="row">
							<div class="col-md-3">
				        		<div class="form-group">
				        			<label class="labelcontrol">PI-MST ID</label>
				        			<input name="" id="" type="text" class="form-control" aria-required="true" aria-invalid="false" placeholder="Id" th:field="*{pIMstId}"  readonly>
				        			</div>
				        		</div>
							<div class="col-md-2">
				        		<div class="form-group">
				        			<label class="labelcontrol">PI No</label>
				        			<input name="" id="" type="text" class="form-control" placeholder="PI No" th:field="*{userPINo}" required>
				        		</div>
				        	</div>
				        	<div class="col-md-2">
				        		<div class="form-group">
				        			<label class="labelcontrol">LC No</label>
				        			<input name="" id="" type="text" class="form-control" placeholder="LC No" th:field="*{lcNo}" required>
				        		</div>
				        	</div>
				        	
				        	<div class="col-3">
										<div class="form-group">
											<label>PI Date</label>
											<input type="date" class="form-control" id="datePicker" name="piDate" th:field="*{piDate}" required>
										</div>
							</div>
							
							<div class="col-2">
                                          <div class="form-group">
                                              <label class="control-label mb-1">Pi Type</label>
                                                    <select class="form-control" aria-required="true" aria-invalid="false" id="piType" name="piType" th:field="*{modelPIType.PITypeId}" required>
                                                         
									                          <option th:each="PIType:${piTypeList}"
											                          th:value="${PIType.PITypeId}"
											                          th:utext="${PIType.typeName}"
																				
											/>
                                                    </select>
                                          </div>
                             </div>
				   
						</div>

						<div class="row">
						
						 <div class="col-2">
						 <div class="form-group">
							<label for="buyerType" class="control-label mb-1">Owner Type</label>
							 <select name="buyerType" id="buyerType" class="form-control" aria-required="true" aria-invalid="false"required>															
				
								<option value=" ">Choose Type</option>

									<option th:each="type:${ownerTypeList}"
											th:value="${type.orderOwnerTypeId}"
											th:utext="${type.orderOwnerTypeName}"
																				
											/>
																				
							 </select>
						  </div>
					   </div>
					 
					 
					 <div class="col-3">
						 <div class="form-group">
							<label for="owner" class="control-label mb-1">Buyer</label>
								<select name="ownerName" id="ownerName" class="form-control" placeholder="Select" th:field="*{modelOrderOwner.orderOwnerId}"  required>
									<option value=" "> Select Buyer</option>
										
								</select>
							</div>
						</div>
							
				        	<div class="col-6">
								<div class="form-group">
									<label class="control-label mb-1">Remarks</label>
										<textarea placeholder="Type you message here..." name="remarks"
			                            class="form-control" rows="2" cols="50" id="" th:field="*{remarks}" ></textarea>
								</div>
							</div>
								
				        	
				        	<div class="col-1">
									<div class="form-group">
										<label class="control-label mb-1">Active</label>
														<!-- Default checked -->
										<div class="custom-control custom-checkbox">
											  <input type="checkbox" class="custom-control-input" id="defaultChecked2" name ="active" th:field="*{active}" checked>
											<label class="custom-control-label" for="defaultChecked2"></label>
										</div>
														<!--<input type="checkbox" class="form-control" aria-required="true" aria-invalid="false" th:field="*{active}"-->
									</div>
								</div>
				        	
						</div>
				
					<div class="modal-header">
					<h5 class="modal-title" id="largeModalLabel">PI-TERMS</h5>
					<!--  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>-->
				    </div>
				    
				    <div class="row"> 
				         
				         <div class="col-12">
								<div class="form-group">
									<center><label class="control-label mb-1">PI Terms & Conditons Details</label></center>
										<textarea rows="12" placeholder="Terms & Condition Here..."  
										th:each="termsPI:${piTermsCon}"
											                          th:value="${termsPI.descripTion}"
											                          th:utext="${termsPI.descripTion}"
										 name="termscon"
			                            class="form-control"  id="termsconDesc" th:field="*{termsconDesc}"></textarea>
								</div>
							</div>
				    
				    </div>
					
						<div class="modal-footer">
							<div class="row">
								<div class="col-12">
									<input type="submit" value="Save" class="btn btn-primary btn-sm " >

								</div>
							</div>

						</div>

					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- ========================================End modal====================================== -->
	
	
	
	 <!--=====================================================================
				pimst edit modal
=====================================================================-->
	<div class="modal fade" id="largeModal12" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content" style="z-index: 1000000000000">
				<div class="modal-header">
					<h5 class="modal-title" id="largeModalLabel">PI-MST</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<form  method="post" th:object="${PIMst}"  th:action="@{/PIMst/save}" novalidate="novalidate">

						<div class="row">
							<div class="col-md-3">
				        		<div class="form-group">
				        			<label class="labelcontrol">PI-MST ID</label>
				        			<input name="pimstid" id="pimstid" type="text" class="form-control" aria-required="true" aria-invalid="false" placeholder="Id" th:field="*{pIMstId}"  readonly>
				        			</div>
				        		</div>
							<div class="col-md-2">
				        		<div class="form-group">
				        			<label class="labelcontrol">PI No</label>
				        			<input name="" id="pino" type="text" class="form-control" placeholder="PI No" th:field="*{userPINo}" required>
				        		</div>
				        	</div>
				        	<div class="col-md-2">
				        		<div class="form-group">
				        			<label class="labelcontrol">LC No</label>
				        			<input name="" id="lcno" type="text" class="form-control" placeholder="LC No" th:field="*{lcNo}" required>
				        		</div>
				        	</div>
				        	
				        	<div class="col-3">
										<div class="form-group">
											<label>PI Date</label>
											<input type="date" class="form-control" id="pidate" name="piDate" th:field="*{piDate}" required>
										</div>
							</div>
							
							<div class="col-2">
                                          <div class="form-group">
                                              <label class="control-label mb-1">Pi Type</label>
                                                    <select class="form-control" aria-required="true" aria-invalid="false" id="pitype" name="piType" th:field="*{modelPIType.PITypeId}" required>
                                                         <option value=" ">Choose Type</option>
									                          <option th:each="PIType:${piTypeList}"
											                          th:value="${PIType.PITypeId}"
											                          th:utext="${PIType.typeName}"
																				
											/>
                                                    </select>
                                          </div>
                             </div>
				   
						</div>

						<div class="row">
						
						 <div class="col-3">
						 <div class="form-group">
							<label for="buyerType" class="control-label mb-1">Order Owner Id</label>
							 <input type=text id ="piorderownerid" class="form-control" th:field="*{modelOrderOwner.orderOwnerId}" readonly />
						  </div>
					   </div>
					 
					 
					 <div class="col-2">
						 <div class="form-group">
							<label for="owner" class="control-label mb-1">Buyer</label>
								<input type=text id ="pibuyer" class="form-control" readonly/>
							</div>
						</div>
							
				        	<div class="col-6">
								<div class="form-group">
									<label class="control-label mb-1">Remarks</label>
										<textarea placeholder="Type you message here..." name="remarks"
			                            class="form-control" rows="2" cols="50" id="piremarks" th:field="*{remarks}" ></textarea>
								</div>
							</div>
								
				        	
				        	<div class="col-1">
									<div class="form-group">
										<label class="control-label mb-1">Active</label>
														<!-- Default checked -->
										<div class="custom-control custom-checkbox">
											  <input type="checkbox" class="custom-control-input" id="defaultChecked2" name ="active" th:field="*{active}" checked>
											<label class="custom-control-label" for="defaultChecked2"></label>
										</div>
														<!--<input type="checkbox" class="form-control" aria-required="true" aria-invalid="false" th:field="*{active}"-->
									</div>
								</div>
				        	
						</div>
				
					<div class="modal-header">
					<h5 class="modal-title" id="largeModalLabel">PI-TERMS</h5>
					<!--  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>-->
				    </div>
				    
				    <div class="row"> 
				         
				         <div class="col-12">
								<div class="form-group">
									<center><label class="control-label mb-1">PI Terms & Conditons Details</label></center>
										<textarea rows="12" placeholder="Terms & Condition Here..."  
										
										 name="termscon"
			                            class="form-control"  id="pitermscondesc" th:field="*{termsconDesc}"></textarea>
								</div>
							</div>
				    
				    </div>
					
						<div class="modal-footer">
							<div class="row">
								<div class="col-12">
									<input type="submit" value="Save" class="btn btn-primary btn-sm " >

								</div>
							</div>

						</div>

					</form>
				</div>
			</div>
		</div>
	</div>
	<!-- ========================================End modal====================================== -->
	
	
	
	 <!--=====================================================================
				pimst termsconview modal
=====================================================================-->
	<div class="modal fade" id="largeModal13" tabindex="-1" role="dialog" aria-labelledby="largeModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content" style="z-index: 1000000000000">
				<div class="modal-header">
					<h5 class="modal-title" id="largeModalLabel">PI-MST TermsconDescription</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
				
				    
				    <div class="row"> 
				         
				         <div class="col-12">
								<div class="form-group">
									<center><label class="control-label mb-1">PI Terms & Conditons Details</label></center>
										<textarea rows="12" placeholder="Terms & Condition Here..."  
										
										 name="termscon"
			                            class="form-control"  id="pitermscondescview" ></textarea>
								</div>
							</div>
				    
				    </div>
					
				</div>
			</div>
		</div>
	</div>
	<!-- ========================================End modal====================================== -->
  
  
  
  
                </div>   <!-- <div class="panel-body">  -->


                   </div>   <!-- <div class="panel">  -->
                     
                     

                </div>

            </div>
                
            
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!--    <script type="text/javascript" src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>-->

    <script src="/js/vendor/jquery-2.1.4.min.js"></script>
    <script src="/js/popper.min.js"></script>
    <script src="/js/plugins.js"></script>
    <script src="/js/main.js"></script>


    <script src="/js/lib/data-table/datatables.min.js"></script>
    <script src="/js/lib/data-table/dataTables.bootstrap.min.js"></script>
    <script src="/js/lib/data-table/dataTables.buttons.min.js"></script>
    <script src="/js/lib/data-table/buttons.bootstrap.min.js"></script>
    <script src="/js/lib/data-table/jszip.min.js"></script>
    <script src="/js/lib/data-table/pdfmake.min.js"></script>
    <script src="/js/lib/data-table/vfs_fonts.js"></script>
    <script src="/js/lib/data-table/buttons.html5.min.js"></script>
    <script src="/js/lib/data-table/buttons.print.min.js"></script>
    <script src="/js/lib/data-table/buttons.colVis.min.js"></script>
    <script src="/js/lib/data-table/datatables-init.js"></script>
   
       <script type="text/javascript">
       
       
/*
	script for getting current Date by KTA

*/	
	
	
	Date.prototype.toDateInputValue = (function() {
		    var local = new Date(this);
		    local.setMinutes(this.getMinutes() - this.getTimezoneOffset());
		    return local.toJSON().slice(0,10);
		});

         document.getElementById("enddate").value = new Date().toDateInputValue();
       
       
       
    
        $(document).ready(function() {
            $('#myTable').DataTable({
                "scrollX": true,
              
            });

       });
        
        $(document).ready(function() {
           $('#wochdTable').DataTable({
              "scrollX": true
          });

     });
        
        $(document).ready(function() {
            $('#pimstTable').DataTable({
               "scrollX": false
           });

        });
        	
        
        $(document).ready(function() {
            $('#myTable3').DataTable({
                "scrollX": true
            });

        });
       
         $(document).ready(function() {
            $('#pichdTable').DataTable({
                "scrollX": true
          });

        });


/*
script for buyerlist through buyerTypeList by KTA

*/        
        
function codeAddress()
	{
	
	$.getJSON("/inquery/owners", {
		                ownerType : $('#ownerType').val(),   
		                ajax : 'true'
		            }, function(data) {
		                var html = '<option value="">Select Buyer</option>';
		                var len = data.length;
		                
		                for ( var i = 0; i < len; i++) {
		                    html += '<option value="' + data[i].orderOwnerId + '">'
		                            + data[i].ownerName + '</option>';
		                }
		                html += '</option>';
		                $('#owner').html(html);
		            });
	
	}
	
	

	window.onload=codeAddress;        
        		
		
		$('#ownerType').change(
		        function() {
		            $.getJSON("/inquery/owners", {
		                ownerType : $(this).val(),   
		                ajax : 'true'
		            }, function(data) {
		                var html = '<option value=" ">Select Buyer</option>';
		                var len = data.length;
		                
		                for ( var i = 0; i < len; i++) {
		                    html += '<option value="' + data[i].ownerName + '">'
		                            + data[i].ownerName + '</option>';
		                }
		                html += '</option>';
		                $('#owner').html(html);
		            });
		        });
		
	
		$('#user').change(
		        function() {
		            $.getJSON("/inquery/user/clusters", {
		               user : $(this).val(),
		                ajax : 'true'
		            }, function(data) {
		                var html = '<option value=" ">Select Cluster</option>';
		                var len = data.length;
		              
		                for ( var i = 0; i < len; i++) {
		                    html += '<option value="' + data[i].modelCluster.clusterId+ '">'
		                            + data[i].modelCluster.clusterName + '</option>';
		                }
		                html += '</option>';
		                $('#cluster').html(html);
		            });
		        });
		
    
    </script>
    

    
  <script>  
	  
	 function myFunction2(){
		 
		 
		 var checkBox = document.getElementById("selectcheck");
		 alert("Hello");
	 }
	
	</script>
	
   <!-- ============================================wochd data populed======================================== -->
   
     <script>
        
     $('#myTable').on('change', ':checkbox', function (e) {
         
    	 
    	 var checks=document.getElementById("defaultChecked1");
    	 
    	 if(checks.checked==true){
    		 
    		// alert("You are showing done chd data.......");
    		 
    		     var $row = $(this).closest("tr");    // Find the row
		 	     var id = $row.find(".woMstId").text(); // Find the text
    		 
    		 
    		  var formData= { 
			            "id" :id
			              
			    };
			  
			    $('#wochdTable tbody').empty();
		        
		        $.ajax({
		        type : "GET",
		      
		       url:"/picontroller/workchd/search",
		        dataType : 'json',
		    data: formData,
		        success: function(result){
		     $.each(result, function(i,wochd){
		    	  
		    var customerRow = '<tr>' +
								            '<td class=" wochdselectbox text-center"><input type="checkbox">' + '</td>' +
											'<td class="wochdId">' + wochd.wOChdId + '</td>' +
											'<td class="woMstId">' + wochd.wOMstId + '</td>' +
											'<td class="qtyId">' + wochd.orderItemQtyId + '</td>' +
											'<td class="orderId">' + wochd.orderId + '</td>' +
											'<td class="ownerName">' + wochd.ownerName + '</td>' +
											'<td class="itemName">' + wochd.itemName + '</td>' +			
								    		'<td class="woQty">' + wochd.itemQty + '</td>' + 
								    		'<td class="saveQty">' + wochd.pIQtySaved + '</td>' +
								    		'<td class="uom">' + wochd.uOMName + '</td>' +
								    		'<td>' + wochd.itemRate + '</td>' +
								    		'<td>' + wochd.currencyName + '</td>'+
								    		'<td>' + wochd.commissionPerUOM + '</td>' +
								    		'<td class="wochdtotalsum">' + wochd.itemQty * wochd.itemRate + '</td>' +
								    		'<td>' + wochd.commissionTotal + '</td>' +    
									        
								'</tr>';
										  
										  
							
		      $('#wochdTable tbody').append(customerRow);
		      
		      
		      //sum of collumn
		        
		        $(document).ready(function(){
		     			 var result = [];
				 			 $("#wochdTable tr").each(function(){
				  	$('.wochdtotalsum', this).each(function(index, val){
				    	if(!result[index]) result[index] = 0;
				      result[index] += parseInt($(val).text());
				    });
				  });
				  
				  document.getElementById("wochdtotal").value=result;
				  
				  
				});
						
			});        // each
						 
			},   // end success
			
			
			
		error : function(e) {
			alert("ERROR: ", e);
			console.log("ERROR: ", e);
				}
			
		   					
		    }); 
    	 }
    	 
    	 
    	 else{
    		 
    	 
    	 
    	 
    	 if ($(this).is(':checked')) {
           
             var checkId = document.getElementById("orderIdFromTable").value;
     		   
            	
     		   if(checkId==0){
     		    	
     		    	
     		    	 var $row = $(this).closest("tr");    // Find the row
     		 	     var id = $row.find(".woMstId").text(); // Find the text
     		 	     var orderId = $row.find(".orderId").text();
     		 	     
     		 	    document.getElementById("mstidTable").value = id; 	      
     		 	 
     			     document.getElementById("orderIdFromTable").value = orderId;
     			    	    
     			    
     			    // Let's test it out
     		
     			    var formData= { 
     			            "id" :id
     			              
     			    };
     			  
     			    $('#wochdTable tbody').empty();
     		        
     		        $.ajax({
     		        type : "GET",
     		       // url :  "/api/inquiry_search",
     		       url:"/workmst/workchd/search/ajax",
     		        dataType : 'json',
     		    data: formData,
     		        success: function(result){
     		     $.each(result, function(i,wochd){
     		    	  
     		    var customerRow = '<tr>' +
     								            '<td class=" wochdselectbox text-center"><input type="checkbox">' + '</td>' +
     											'<td class="wochdId">' + wochd.wOChdId + '</td>' +
     											'<td class="woMstId">' + wochd.wOMstId + '</td>' +
     											'<td class="qtyId">' + wochd.orderItemQtyId + '</td>' +
     											'<td class="orderId">' + wochd.orderId + '</td>' +
     											'<td class="ownerName">' + wochd.ownerName + '</td>' +
     											'<td class="itemName">' + wochd.itemName + '</td>' +			
     								    		'<td class="woQty">' + wochd.itemQty + '</td>' + 
     								    		'<td class="saveQty">' + wochd.pIQtySaved + '</td>' +
     								    		'<td class="uom">' + wochd.uOMName + '</td>' +
     								    		'<td>' + wochd.itemRate + '</td>' +
     								    		'<td>' + wochd.currencyName + '</td>'+
     								    		'<td>' + wochd.commissionPerUOM + '</td>' +
     								    		'<td class="wochdtotalsum">' + wochd.itemQty * wochd.itemRate + '</td>' +
     								    		'<td>' + wochd.commissionTotal + '</td>' +    
     									        
     								'</tr>';
     										  
     										  
     							
     		      $('#wochdTable tbody').append(customerRow);
     		      
     		      
     		      //sum of collumn
     		        
     		        $(document).ready(function(){
     		     			 var result = [];
     				 			 $("#wochdTable tr").each(function(){
     				  	$('.wochdtotalsum', this).each(function(index, val){
     				    	if(!result[index]) result[index] = 0;
     				      result[index] += parseInt($(val).text());
     				    });
     				  });
     				  
     				  document.getElementById("wochdtotal").value=result;
     				  
     				  
     				});
     						
     			});        // each
     						 
     			},   // end success
     			
     			
     			
     		error : function(e) {
     			alert("ERROR: ", e);
     			console.log("ERROR: ", e);
     				}
     			
     		   					
     		    }); 
     		        	              
     		  
     		    // end ajax 
     		       
     		    }
     		    
     		 
     		    
     		   if(checkId!=0){
     			   
     			    
     			     var $row = $(this).closest("tr");    // Find the row
     		 	     var id = $row.find(".woMstId").text(); // Find the text
     		 	     var orderId = $row.find(".orderId").text();
     		 	     
     			     if(checkId==orderId){
     			   
     			    	    var formData= { 
     					            "id" :id
     					              
     					    };
     					  
     				        
     				        $.ajax({
     				        type : "GET",
     				       // url :  "/api/inquiry_search",
     				       url:"/workmst/workchd/search/ajax",
     				        dataType : 'json',
     				    data: formData,
     				        success: function(result){
     				     $.each(result, function(i,wochd){
     				    	 
     				
     				    	  
     				    var customerRow = '<tr>' +
     										            '<td class="wochdselectbox text-center" ><input type="checkbox">' + '</td>' +
     													'<td class="wochdId">' + wochd.wOChdId + '</td>' +
     													'<td class="woMstId">' + wochd.wOMstId + '</td>' +
     													'<td class="qtyId">' + wochd.orderItemQtyId + '</td>' +
     													'<td class="orderId">' + wochd.orderId + '</td>' +
     													'<td class="ownerName">' + wochd.ownerName + '</td>' +
     													'<td class="itemName">' + wochd.itemName + '</td>' +			
     										    		'<td class="woQty">' + wochd.itemQty + '</td>' + 
     										    		'<td class="saveQty">' +wochd.pIQtySaved + '</td>' +
     										    		'<td class="uom">' + wochd.uOMName + '</td>' +
     										    		'<td>' + wochd.itemRate + '</td>' +
     										    		'<td>' + wochd.currencyName + '</td>'+
     										    		'<td>' + wochd.commissionPerUOM + '</td>' +
     										    		'<td class="wochdtotalsum">' + wochd.itemQty * wochd.itemRate + '</td>' +
     										    		'<td>' + wochd.commissionTotal + '</td>' +
     										'</tr>';
     												  
     												  
     									
     				      $('#wochdTable tbody').append(customerRow);
     				      
     				      //sum of collumn
     				        
     				        $(document).ready(function(){
     				     			 var result = [];
     						 			 $("#wochdTable tr").each(function(){
     						  	$('.wochdtotalsum', this).each(function(index, val){
     						    	if(!result[index]) result[index] = 0;
     						      result[index] += parseInt($(val).text());
     						    });
     						  });
     						  
     						  document.getElementById("wochdtotal").value=result;
     						  
     						  
     						});
     				      
     								
     					});        // each
     								 
     					},   // end success
     					
     					
     					
     				error : function(e) {
     					alert("ERROR: ", e);
     					console.log("ERROR: ", e);
     						}
     					
     				
     				    });
     				        		       
     				        
     			     }
     			     else{
     			    	 alert("Buyer can't ber different,Please Refresh For Choose New Buyer");
     			    	 //if ( $( "#chkWoMst" ).is( ":checked" ) {
     			    		  $(".selectbox", $row).find('input[type="checkbox"]').prop('checked', false);   
     				   
     				  	    //$(this).prop("checked", false);
     				  	

     				  	  //   }
     			    	 
     	                 
     			     }
     		   }       
             
         } else {
            
        	 
        	     var $row = $(this).closest("tr");    // Find the row
		 	     var id = $row.find(".woMstId").text(); // Find the text
		 	     
		 	     //alert(id);
		 	     
			 	$("#wochdTable tbody tr").each(function(){
			  	 // alert("find chd table");
			  	   var $row = $(this).closest("tr");    // Find the row
		 	       var checkingid = $row.find(".woMstId").text(); // Find the text
		 	      //alert(idtest);
		 	       if(id==checkingid){
		 	    	  $(this).closest("tr").remove();
		 	    	  
		 	    	 //sum of collumn
  			        
  			        $(document).ready(function(){
  			     			 var result = [];
  					 			 $("#wochdTable tr").each(function(){
  					  	$('.wochdtotalsum', this).each(function(index, val){
  					    	if(!result[index]) result[index] = 0;
  					      result[index] += parseInt($(val).text());
  					    });
  					  });
  					  
  					  document.getElementById("wochdtotal").value=result;
  					  
  									  
  					});
		 	    	 
		 	    	 
  			     
		 	       }
			  });
			 
        	 
        	// $('#wochdTable tbody').empty();
        	
        	
        	
         }
    	 
    	 
    	 
   	  
    	   }
    		
     
    });
      
      </script>
     
    
   <!--========================================End============================================================--> 
  
  
  
  <!-- ============================================This section for Search inused PI============================= -->
  
   <script>
   
   $(function () {
	    $('#pimst').click(function(e) {
	    
      var checkStatus=document.getElementById("defaultChecked1");
	        
	        if(checkStatus.checked==true){
	        	
	        	alert("Inused PIMst data is only for not done PI");
	        }
	        
	        
	        else{
	        	
	        
	    	
	      e.preventDefault();
	        $('#pimstTable tbody').empty();
	              
	            $.ajax({
	            type : "GET",
	           url:"/pimst/search",
	            dataType : 'json',
	            
	            success: function(result){
		     $.each(result, function(i,PIMstData){
		    	 
						
		    var customerRow = '<tr>' +	
		    '<td  class="pIMstId">'  + PIMstData.pIMstId + '</td>'
		    +'<td >' + PIMstData.pIDate + '</td>'
		    +'<td>' + PIMstData.pITypeName + '</td>'
		    +'<td class="orderowneridpimst" hidden>' + PIMstData.orderOwnerId + '</td>'
		    +'<td class="buyername">' + PIMstData.ownerName + '</td>'
		    + '<td class="view"> <button class=" btn btn-primary" data-toggle="modal" data-target="#largeModal13" >View</button>' +'</td>'
		    //+'<td> <textarea>' + PIMstData.termsconDesc + '</textarea></td>' 
			+ '<td class="chdpopulate"> <button class=" btn btn-success" >Child Data Populate</button>' +'</td>'
			+'<td class="Edit"> <button class=" btn btn-warning" data-toggle="modal" data-target="#largeModal12">Edit</button>' +'</td>'
			+					
			
			'</tr>';
										  			
		      $('#pimstTable tbody').append(customerRow);
						
			});        // each
						 
			},   // end success
		error : function(e) {
			alert("ERROR: ", e);
			console.log("ERROR: ", e);
				}
						
						
	        });   // end ajax
	        
	        
	        }   
	    
	   });  // submit
	   });   // function
   
   </script>
   
   <!-- =====================================================Click Child Data Populate================================= -->
   <script>
      
   $("#pimstTable").on('click','.chdpopulate',function(){

	     var firstorderowner = document.getElementById("orderIdFromTable").value;
	    	 //alert(firstorderowner);
	    	
		     var $row = $(this).closest("tr");    // Find the row
		     var id = $row.find(".pIMstId").text(); // Find the text
		     var secondorderowner = $row.find(".orderowneridpimst").text();
		    // alert(secondorderowner);
	     
	  if(firstorderowner==secondorderowner){
		  
		  $('#wochdTable tr').filter(':has(:checkbox:checked)').each(function() { 
			    var wochdId = $(this).find("td:eq(1)").html();
			 
		    	var ids= document.getElementById("wochdid").value = wochdId;
		    	var chdId = document.getElementById("wochdid").value;
		    	  
		    	 var formData= { 
		    			      "chdId" :chdId
		    		       
		    		        
		    		        };
		    		        
	    	 				 
		    		        //  $('#table tbody').html('');
		    		      
		    		        $('#pichdTable tbody').empty();
		    		       
		    		           
		    		            $.ajax({
		    		            type : "GET",
		    		           // url :  "/api/inquiry_search",
		    		           url:"/pichd/search",
		    		            dataType : 'json',
		    			    data: formData,
		    		            success: function(result){
		    			     $.each(result, function(i,pichd){
		    				
		    			    var piChdRow = '<tr>' +
		    			   // '<td class="text-center" hidden><input type="checkbox" checked/>' + '</td>' +
		    			    '<td>' + + '</td>' +
		    			    '<td class="pIMstId">' + id + '</td>' +
		    			    '<td>' + pichd.wOMstId + '</td>' +
		    			    '<td class="wOChdId">' + pichd.wOChdId + '</td>' +
							'<td>' + pichd.orderItemQtyId + '</td>' +
							'<td>' + pichd.orderId + '</td>' +						
							'<td>' + pichd.itemName + '</td>' +	
							'<td class="qty">' + pichd.itemQty + '</td>' +	
				    		//'<td class="qty"><input type="text" value='+ pichd.itemQty + ' size="3px" readonly/>' + '<td>'+    		
				    		//'<td class="qtysaved"><input type="text" value=' + pichd.pIQtySaved + ' size="3px" readonly/>' + '</td>' +
				    		'<td class="qtysaved">' + pichd.pIQtySaved  + '</td>' +	
				    		//'<td class="qty" ><input type="text" value=' + (pichd.itemQty) + ' size="3px" readonly/>' + '</td>' +
				    		//'<td class="qtysaved"><input type="text" value=' + (pichd.pIQtySaved) + ' size="3px" readonly/>' + '</td>' +
				    		'<td class="editqty" id="setqty"><input type="text" name="editqty" class="test" id="editqty" value=' + (pichd.itemQty - pichd.pIQtySaved) + ' onChange="updatePrice()" size="3px"/>' + '</td>' +
				    		//'<td class="editqty" >' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
				    		
				    	    //'<td class="editqty" id="setqty" contentEditable>' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
				    		'<td>' + pichd.uOMName + '</td>' +
				    		'<td hidden class="uOMId">' + pichd.uOMId + '</td>' +
				    		'<td class="itemrate">' + pichd.itemRate + '</td>' +
				    		
				    		 '<td class="currencyList" ><select class="form-control" id="currencyId">' +
								'<option value="">Select Currency</option>';
								
						$.each(pichd.modelCurrencyList, function(j,currency) {
							piChdRow=piChdRow +'<option value=' + currency.currencyId + '>'+currency.currencyName+ '</option>';
				
				
				});			
			
																								
						piChdRow=piChdRow + '/>' +
								 
			    '</select></td>' +	
				    		
				    		
				    		'<td>' + pichd.commissionPerUOM + '</td>' +
				    		'<td class="pichdtotalsum">' + (pichd.itemQty * pichd.itemRate) + '</td>' +
				    		//'<td class="pichdtotalsum"><input type="text" id="pichdtotalsum" value=' + pichd.itemQty * pichd.itemRate + ' size="3px" readonly />' + '</td>' +
				    		'<td>' + pichd.commissionTotal + '</td>' +
				    		'<td class="removerowpichd"> <button class=" btn btn-danger" >Remove</button>' +'</td>'
				    		
		    									'</tr>';    											  
		    								
		    			      $('#pichdTable tbody').append(piChdRow);
		    			      
		    			      
		    			      //sum of collumn
		    			        
		    			        $(document).ready(function(){
		    			     			 var result = [];
		    					 			 $("#pichdTable tr").each(function(){
		    					  	$('.pichdtotalsum', this).each(function(index, val){
		    					    	if(!result[index]) result[index] = 0;
		    					      result[index] += parseInt($(val).text());
		    					    });
		    					  });
		    					  
		    					  document.getElementById("pichdtotal").value=result;
		    					  
		    					  
		    					});
		    			      
		    			      
		    			     
		    							
		    				});        // each
		    							 
		    				},   // end success
		    			error : function(e) {
		    				alert("ERROR: ", e);
		    				console.log("ERROR: ", e);
		    					}
			        });   // end ajax
			           			        
	     
		    		           
		     });
		      
		  
	  }
		
	  else {
		  alert("Please select same buyer, diffrent buyer not allowed");
		  
	  }
	  
     
		
	});
  
   </script>
   
  
   <!-- ========================================End========================================================= -->
   
   <!-- =========================================Select all box from workOrderChild table==================================== -->
   <script>
   $('#myCheck').on('click', function(e) {
       $('input[name="checkbox"]').prop('checked', $(this).prop('checked'));
        alert("Select all");
      if($(this).is(':checked',true))  
		{
			$(".wochdselectbox").find('input[type="checkbox"]').prop('checked', true);  
		}  
		else  
		{  
			$(".wochdselectbox").find('input[type="checkbox"]').prop('checked',false);  
		}  
      
    });
   

   
   </script>
   
   <!-- ==============================================End=================================================== -->
  
   <!-- =============================================Clear pi chd data===================================== -->
   <script>
   
   $(function () {
	    $('#clearpichd').click(function(e) {
	     // prevent default for submission
	      e.preventDefault();
	     // form data capture
	     alert("clear chd data");
	     
	        $('#pichdTable tbody').empty();

		    
	
	   });
	    
// submit
	   });   // function
    </script>
   <!-- ===================================================================================================== -->
   
   
   
   <!-- =======================================PI Check================================================= -->
   
   <script>
	    
   $(function () {
	    $('#btnsearch').click(function(e) {
	    	
	        document.getElementById("orderIdFromTable").value = '0';
	        document.getElementById("displayMessage").value=null;
	        
	        document.getElementById("savepichd").innerHTML="Save Chd Data";
	        
	        var check=document.getElementById("defaultChecked1");
	        
	        if(check.checked==true){
	        	
	     
		
	        	//alert("pi is checked");
	        	
	        	 $('#myTable tbody').empty();
	        	
	        	
	        	$(function () {
	               // $('#searchForm').submit(function(e) {
	                 // prevent default for submission
	                  e.preventDefault();
	                 // form data capture
	                  var formData= { 
	                    "ownerType" :$("#ownerType").val(),
	                    "owner" : $("#owner").val(),
	                    "ultimateOwner" : $("#ultimateOwner").val(),
	                    "work_start_date" : $("#startdate").val(),
	                    "work_end_date" : $("#enddate").val(),
	                    "user" :$("#user").val(),
	                    "cluster" : $("#cluster").val(),
	                    
	                    };
	                    
	                    //  $('#table tbody').html('');
	                    $('#myTable tbody').empty();
	                    $('#wochdTable tbody').empty();
	                    $('#pimstTable tbody').empty();
	                    $('#pichdTable tbody').empty();
	                   // document.getElementById("orderIdFromTable").value = '0';
	                       
	                        $.ajax({
	                        type : "GET",
	                       // url :  "/api/inquiry_search",
	                       url:"/workorder/mst/search/withpi",
	                        dataType : 'json',
	            	    data: formData,
	                        success: function(result){
	            	     $.each(result, function(i,womst){
	            					
	            	    var customerRow = '<tr>' +
	            							            '<td class="selectbox text-center" name="chkSelectBox" ><input id="chkWoMst" type="checkbox">' + '</td>' +
	            							            '<td class="orderId" hidden>' + womst.orderOwnerId+ '</td>' +
	            										'<td >' + womst.ownerName + '</td>' +
	            										'<td class="woMstId">' + womst.woMstId + '</a></td>' +

	            										'<td>' + womst.woDate + '</td>' +   
	            										
	            										
	            									  '</tr>';
	            									  
	            									  
	            						
	            	      $('#myTable tbody').append(customerRow);
	            	      
	            	      
	            					
	            		});        // each
	            					 
	            		},   // end success
	            	error : function(e) {
	            		alert("ERROR: ", e);
	            		console.log("ERROR: ", e);
	            			}
	            					
	            					
	                    });   // end ajax
	                    
	               });   // function
	        	
	        }
	        
	        
	        else{
	        	
	        	//alert("pi is unchecked");
	        	
	        	$('#myTable tbody').empty();
        	
	            $(function () {
	             //   $('#searchForm').submit(function(e) {
	                 // prevent default for submission
	                  e.preventDefault();
	                 // form data capture
	                  var formData= { 
	                    "ownerType" :$("#ownerType").val(),
	                    "owner" : $("#owner").val(),
	                    "ultimateOwner" : $("#ultimateOwner").val(),
	                    "work_start_date" : $("#startdate").val(),
	                    "work_end_date" : $("#enddate").val(),
	                    "user" :$("#user").val(),
	                    "cluster" : $("#cluster").val(),
	                    
	                    };
	                    
	                    //  $('#table tbody').html('');
	                    $('#myTable tbody').empty();
	                    $('#wochdTable tbody').empty();
	                    $('#pimstTable tbody').empty();
	                    $('#pichdTable tbody').empty();
	                   // document.getElementById("orderIdFromTable").value = '0';
	                       
	                        $.ajax({
	                        type : "GET",
	                       // url :  "/api/inquiry_search",
	                       url:"/workorder/mst/search",
	                        dataType : 'json',
	            	    data: formData,
	                        success: function(result){
	            	     $.each(result, function(i,womst){
	            					
	            	    var customerRow = '<tr>' +
	            							            '<td class="selectbox text-center" ><input id="chkWoMst" type="checkbox">' + '</td>' +
	            							            '<td class="orderId" hidden>' + womst.orderOwnerId+ '</td>' +
	            										'<td >' + womst.ownerName + '</td>' +
	            										//'<td><input type="text" value='+ womst.ownerName+ '>' + '<td>'+
	            										'<td class="woMstId">' + womst.woMstId + '</a></td>' +            										
	            										'<td>' + womst.woDate + '</td>' +
	            									
	            								         
	            								        
	            									  '</tr>';
	            									  
	            									  
	            						
	            	      $('#myTable tbody').append(customerRow);
	            					
	            		});        // each
	            					 
	            		},   // end success
	            	error : function(e) {
	            		alert("ERROR: ", e);
	            		console.log("ERROR: ", e);
	            			}
	            					
	            					
	                    });   // end ajax
	                    
	               });   // function
	        }
	       
	    	
	    	
   	    });
   });
   	  
				
   	    
   </script>
   
   <!-- ============================================End====================================================== -->
   
   
   <!-- ==================================Script for pichd data save========================================== -->
     <script>
     
	    $('#savepichd').click(function(e) {
	    	
	    	//alert("working");
	    	
	    	
	    	 var checkStatus=document.getElementById("defaultChecked1");
		        
		        if(checkStatus.checked==true){
		        	
		        //	alert("Saving edit pichd data............");
		        	
		        	
		        	 $("#pichdTable tbody tr").each(function(){
		  		  	     
			    		// alert("find table"); 
			    		 
			    	        var tr = $(this).closest('tr');
			    	       
			    	        var pIChdId = tr.find(".pIChdId").text();
			    	        
			  		  	    let pIQty = tr.find('input[name="editqty"]').val();
			        	    var currency = tr.find("#currencyId").val();
			        	    
			      
			        	    
			        	    var n="";
			        	  
			        	  if(currency==n)
			        	  {
			        	  alert("Please insert Currency");
			        	  }
			        	  else
			        	  {

			        	  var formData= { 
			        			      "pIChdId" : pIChdId,				        			     
			        			      "pIQty" : pIQty,
			        			      "currency" : currency
			        		        };
			     			 	     			 
			     			 
			     			 $.ajax({
			     		            type : "POST",	    		           
			     		             url:"/picontroller/pichd/edit/data/save",
			     		            dataType : 'json',
			     			        data: formData,
			     		            success: function(result){
			     		           
			     	if(result!=null||result.length!=0)
		            {
		            var text="Save Successfully";
		            document.getElementById("displayMessage").value=text;
		            }
			     		            
			     		            $.each(result, function(i,pichd){
			     		             
			     		             var piChdRow = '<tr>' +
				    			   // '<td class="text-center" hidden><input type="checkbox" checked/>' + '</td>' +
				    			    '<td>' +pichd.pIChdId + '</td>' +
				    			    '<td class="pIMstId">' +pichd.pIMstId + '</td>' +
				    			    '<td>' + pichd.wOMstId + '</td>' +
				    			    '<td class="wOChdId">' + pichd.wOChdId + '</td>' +
									'<td>' + pichd.orderItemQtyId + '</td>' +
									'<td>' + pichd.orderId + '</td>' +						
									'<td>' + pichd.itemName + '</td>' +	
									'<td class="qty">' + pichd.itemQty + '</td>' +	
						    		//'<td class="qty"><input type="text" value='+ pichd.itemQty + ' size="3px" readonly/>' + '<td>'+    		
						    		//'<td class="qtysaved"><input type="text" value=' + pichd.pIQtySaved + ' size="3px" readonly/>' + '</td>' +
						    		//'<td class="qtysaved">' + pichd.pIQtySaved  + '</td>' +
						    		'<td class="editqty" id="setqty"><input type="text" name="editqty" class="test" id="editqty" value=' + (pichd.pIQtySaved) + ' onChange="updatePrice()" size="3px"/>' + '</td>' +
						    		//'<td class="qty" ><input type="text" value=' + (pichd.itemQty) + ' size="3px" readonly/>' + '</td>' +
						    		//'<td class="qtysaved"><input type="text" value=' + (pichd.pIQtySaved) + ' size="3px" readonly/>' + '</td>' +
						    		//'<td class="editqty" id="setqty"><input type="text" name="editqty" class="test" id="editqty" value=' + (pichd.itemQty - pichd.pIQtySaved) + ' onChange="updatePrice()" size="3px"/>' + '</td>' +
						    		'<td class="" >' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
						    		
						    	    //'<td class="editqty" id="setqty" contentEditable>' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
						    		'<td>' + pichd.uOMName + '</td>' +
						    		'<td hidden class="uOMId">' + pichd.uOMId + '</td>' +
						    		'<td class="itemrate">' + pichd.itemRate + '</td>' +
						    		
						    		'<td class="itemrate">' + pichd.currencyName + '</td>' +
						    	
						    	/*	
						    		 '<td class="currencyList" ><select class="form-control" id="currencyId">' +
										'<option value="+pichd.currencyId+">'+pichd.currencyName+'</option>';
										
								$.each(pichd.modelCurrencyList, function(j,currency) {
									piChdRow=piChdRow +'<option value=' + currency.currencyId + '>'+currency.currencyName+ '</option>';
						
						
						});			
					
																										
								piChdRow=piChdRow + '/>' +
										 
					    '</select></td>' +	
						   */ 		
						    		
						    		'<td>' + pichd.commissionPerUOM + '</td>' +
						    		'<td class="pichdtotalsum">' + (pichd.itemQty * pichd.itemRate) + '</td>' +
						    		//'<td class="pichdtotalsum"><input type="text" id="pichdtotalsum" value=' + pichd.itemQty * pichd.itemRate + ' size="3px" readonly />' + '</td>' +
						    		'<td>' + pichd.commissionTotal + '</td>' +
						    		'<td class="removerowpichd"> <button class=" btn btn-danger" >Remove</button>' +'</td>'
						    		
				    									'</tr>';
				    									
				    				 $('#pichdTable tbody').append(piChdRow);					  	
			     		      
			     		      });        // each
			     		               
			     
			     		            	
			     		            },
			     			 });	// ajax's function
			     			 
			     			 $(this).closest('tr').remove();
			        	  
			        	  
			        	  }		// else condition
			        	         	    
			           
			        	    
			        	   
			               
			           
			      });
		        	
		        }
		        
		        else{
		        
	    	
   	     
	    	 $("#pichdTable tbody tr").each(function(){
  		  	     
	    		// alert("find table"); 
	    		 
	    	        var tr = $(this).closest('tr');
	    	       
	    	        var pIMstId = tr.find(".pIMstId").text();
	    	        var wOChdId = tr.find(".wOChdId").text();
	    	        var uOMId = tr.find(".uOMId").text();
	  		  	    let pIQty = tr.find('input[name="editqty"]').val();
	        	    var itemRate = tr.find(".itemrate").text();
	        	    
	        	    var currency = tr.find("#currencyId").val();
	        	    
	       //edited by KTA
	        	    
	        	    var n="";
	        	  
	        	  if(currency==n)
	        	  {
	        	  alert("Please insert Currency");
	        	  }
	        	  else
	        	  {

	        	  var formData= { 
	        			      "pIMstId" : pIMstId,	
	        			      "wOChId" : wOChdId,
	        			      "uOMId" : uOMId,
	        			      "pIQty" : pIQty,
	        			      "itemRate" : itemRate,
	        			      "currency" : currency
	        		        };
	     			 	     			 
	     			 
	     			 $.ajax({
	     		            type : "POST",	    		           
	     		             url:"/pichd/save",
	     		            dataType : 'json',
	     			        data: formData,
	     		            success: function(result){
	     		           
	     	if(result!=null||result.length!=0)
            {
            var text="Save Successfully";
            document.getElementById("displayMessage").value=text;
            }
	     		            
	     		            $.each(result, function(i,pichd){
	     		             
	     		             var piChdRow = '<tr>' +
		    			   // '<td class="text-center" hidden><input type="checkbox" checked/>' + '</td>' +
		    			    '<td>' +pichd.pIChdId + '</td>' +
		    			    '<td class="pIMstId">' +pichd.pIMstId + '</td>' +
		    			    '<td>' + pichd.wOMstId + '</td>' +
		    			    '<td class="wOChdId">' + pichd.wOChdId + '</td>' +
							'<td>' + pichd.orderItemQtyId + '</td>' +
							'<td>' + pichd.orderId + '</td>' +						
							'<td>' + pichd.itemName + '</td>' +	
							'<td class="qty">' + pichd.itemQty + '</td>' +	
				    		//'<td class="qty"><input type="text" value='+ pichd.itemQty + ' size="3px" readonly/>' + '<td>'+    		
				    		//'<td class="qtysaved"><input type="text" value=' + pichd.pIQtySaved + ' size="3px" readonly/>' + '</td>' +
				    		'<td class="qtysaved">' + pichd.pIQtySaved  + '</td>' +	
				    		//'<td class="qty" ><input type="text" value=' + (pichd.itemQty) + ' size="3px" readonly/>' + '</td>' +
				    		//'<td class="qtysaved"><input type="text" value=' + (pichd.pIQtySaved) + ' size="3px" readonly/>' + '</td>' +
				    		'<td class="editqty" id="setqty"><input type="text" name="editqty" class="test" id="editqty" value=' + (pichd.itemQty - pichd.pIQtySaved) + ' onChange="updatePrice()" size="3px"/>' + '</td>' +
				    		//'<td class="editqty" >' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
				    		
				    	    //'<td class="editqty" id="setqty" contentEditable>' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
				    		'<td>' + pichd.uOMName + '</td>' +
				    		'<td hidden class="uOMId">' + pichd.uOMId + '</td>' +
				    		'<td class="itemrate">' + pichd.itemRate + '</td>' +
				    		
				    		'<td class="itemrate">' + pichd.currencyName + '</td>' +
				    	
				    	/*	
				    		 '<td class="currencyList" ><select class="form-control" id="currencyId">' +
								'<option value="+pichd.currencyId+">'+pichd.currencyName+'</option>';
								
						$.each(pichd.modelCurrencyList, function(j,currency) {
							piChdRow=piChdRow +'<option value=' + currency.currencyId + '>'+currency.currencyName+ '</option>';
				
				
				});			
			
																								
						piChdRow=piChdRow + '/>' +
								 
			    '</select></td>' +	
				   */ 		
				    		
				    		'<td>' + pichd.commissionPerUOM + '</td>' +
				    		'<td class="pichdtotalsum">' + (pichd.itemQty * pichd.itemRate) + '</td>' +
				    		//'<td class="pichdtotalsum"><input type="text" id="pichdtotalsum" value=' + pichd.itemQty * pichd.itemRate + ' size="3px" readonly />' + '</td>' +
				    		'<td>' + pichd.commissionTotal + '</td>' +
				    		'<td class="removerowpichd"> <button class=" btn btn-danger" >Remove</button>' +'</td>'
				    		
		    									'</tr>';
		    									
		    				 $('#pichdTable tbody').append(piChdRow);					  	
	     		      
	     		      });        // each
	     		               
	     
	     		            	
	     		            },
	     			 });	// ajax's function
	     			 
	     			 $(this).closest('tr').remove();
	        	  
	        	  
	        	  }		// else condition
	        	         	    
	        // end edited by KTA( only each function & var piChdRow)	   
	        	    
	        	   
	               
	           
	      });
	    	 
		        }	 
	    	
       });
     
     </script> 
     
   <!-- ===========================================End pichd data svae========================================= -->
   
   <!-- ==============================================Remove  row from pichd=============================================== -->
   
      <script>
      
      
      $("#pichdTable").on('click','.removerowpichd',function(){
   	              
    	    WRN_PROFILE_DELETE = "Are you sure you want to delete this row?";  
			var check = confirm(WRN_PROFILE_DELETE); 
			if(check == true){
    		    $(this).closest("tr").remove();    // Find the row
			}
			
			
			 //sum of collumn
	        
	        $(document).ready(function(){
	     			 var result = [];
			 			 $("#pichdTable tr").each(function(){
			  	$('.pichdtotalsum', this).each(function(index, val){
			    	if(!result[index]) result[index] = 0;
			      result[index] += parseInt($(val).text());
			    });
			  });
			  
			  document.getElementById("pichdtotal").value=result;
			  
			  
			});
      });
      </script>
   
   <!-- ================================================End===================================================== -->
   
   <!-- =======================================Select buyer type change======================================== -->
      <script>
      

   
      
      $('#buyerType').change(
		        function() {
		            $.getJSON("/inquery/buyers", {
		            	buyerType : $(this).val(),   
		                ajax : 'true'
		            }, function(data) {
		                var html = '<option value=" ">Select Buyer</option>';
		                var len = data.length;
		                
		                for ( var i = 0; i < len; i++) {
		                    html += '<option value="' + data[i].orderOwnerId + '">'
		                            + data[i].ownerName + '</option>';
		                }
		                html += '</option>';
		                $('#ownerName').html(html);
		            });
		        });
		

    </script>
   
   <!-- =====================================End================================================================ -->
   
   
   <!-- ===========================================PIMST Edit function========================================= -->
     
     <script>
     $("#pimstTable").on('click','.Edit',function(){
    	 
    	     var $row = $(this).closest("tr");    // Find the row
		     var id = $row.find(".pIMstId").text();
		     var ownername = $row.find(".buyername").text();// Find the text
		    // alert(id);
		     
		     var formData= { 
   			     "id" : id	
   			     			      
   		       };
			 
			 $.ajax({
		            type : "GET",	    		           
		             url:"/pimst/edit",
		            dataType : 'json',
			        data: formData,
		            success: function(result){
		            	$.each(result, function(i,pimst){
		                        
		            		//alert(pimst.orderOwnerId);
		            		
		            		document.getElementById("pimstid").value=pimst.pIMstId;
		            		document.getElementById("pino").value=pimst.userPINo;
		            		document.getElementById("lcno").value=pimst.lcNo;
		            		document.getElementById("pidate").value=pimst.pIDate;
		            		document.getElementById("pitype").value=pimst.pIType;
		            		document.getElementById("piremarks").value=pimst.remarks;
		            		document.getElementById("pitermscondesc").value=pimst.termsconDesc;
		            		document.getElementById("piorderownerid").value=pimst.orderOwnerId;
		            		document.getElementById("pibuyer").value=ownername;
		            		
		            		});
		            	
		            }
		            
		            
			 });
			
     });
     
     </script>
     
   <!-- ==================================================End here============================================== -->
   
   <!--=========================================== pitermsview================================================== -->
      
        <script>
     $("#pimstTable").on('click','.view',function(){
    	 
    	     var $row = $(this).closest("tr");    // Find the row
		     var id = $row.find(".pIMstId").text();
		     
		     var formData= { 
   			     "id" : id	
   			     			      
   		       };
			 
			 $.ajax({
		            type : "GET",	    		           
		             url:"/pimst/edit",
		            dataType : 'json',
			        data: formData,
		            success: function(result){
		            	$.each(result, function(i,pimst){
		                        
		            		document.getElementById("pitermscondescview").value=pimst.termsconDesc;
		            		
		            		});
		            	
		            }
		            
		            
			 });
			
     });
     
     </script>
   <!-- ================================================End====================================================== -->
   
   <!-- ================================================Edit specific value of collumn========================== -->

      <script type = "text/javascript">
      
      $("#pichdTable").on('click','.editqty',function(){
    	  
    	 // alert("value change");
    	 	  
    	  function update(id){
        
          var qty= document.getElementById(id).innerHTML = "<input type = 'text' name = 'txtNewInput' id = 'txtNewInput' value = '" + content + "'/>";
                  
        
         }
    	    
      });
    </script>
   
   <!-- ======================================================End============================================== -->
   
   <!-- ===========================Calculate sum on change collumn============================================= -->
 
   
   <script>
   
   $("#pichdTable").on('input', '.editqty', function () {
	    
       
       $("#pichdTable tbody tr").each(function(){
  		  	     
    	        let tr = $(this).closest('tr');
  		  	    let qty = tr.find('input[name="editqty"]').val();
        	    let rate = tr.find(".itemrate").text();
        	  
        	    var total=(rate*qty);
        	    
                $(this).find('.pichdtotalsum').text(total);
        	    
        	    
                //sum of collumn
		        
		        $(document).ready(function(){
		     			 var result = [];
				 			 $("#pichdTable tr").each(function(){
				  	$('.pichdtotalsum', this).each(function(index, val){
				    	if(!result[index]) result[index] = 0;
				      result[index] += parseInt($(val).text());
				    });
				  });
				  
				  document.getElementById("pichdtotal").value=result;
				  
				  
				});
           
       });
           	  
      });
   
   </script>
   
   <!-- =======================================End============================================================= -->
   
   <!-- =======================================View PI Chd Done Data=========================================== -->  
     
     
       <script>
       
       $('#wochdTable').on('change', ':checkbox', function (e) {
          
    	   var checks=document.getElementById("defaultChecked1");
	        
	        if(checks.checked==true){
    	
    	   
    	   if ($(this).is(':checked')) {
        	  
        	   
        	   
    		   var tr = $(this).closest('tr');
    	       
   	           var wochdid = tr.find(".wochdId").text();
   	        //   var wocmstid = tr.find(".woMstId").text();
   	       //    var qtyid = tr.find(".qtyId").text();
   	        //   var orderid = tr.find(".orderId").text();
   	         //  var itemName = tr.find(".itemName").text();
   	          // var uomName = tr.find(".uom").text();
   	          // var qty = tr.find(".woQty").text();
   	          // var saveQty = tr.find(".saveQty").text();
        	   
        	 //  alert(uomName);
        	 
        	  	document.getElementById("savepichd").innerHTML="Save Edit Data";
        	   
        	   
        	   var formData= { 
         			     "id" : wochdid	
         			     			      
         		       };
      			 
      			 $.ajax({
      		            type : "GET",	    		           
      		             url:"/picontroller/pichd/edit/data",
      		            dataType : 'json',
      			        data: formData,
      		            success: function(result){
      		            	 $.each(result, function(i,pichd){
    	     		             
    	     		             var piChdRow = '<tr>' +
    		    			   // '<td class="text-center" hidden><input type="checkbox" checked/>' + '</td>' +
    		    			    '<td class="pIChdId">' +pichd.pIChdId + '</td>' +
    		    			    '<td class="pIMstId">' +pichd.pIMstId + '</td>' +
    		    			    '<td>' + pichd.wOMstId + '</td>' +
    		    			    '<td class="wOChdId">' + pichd.wOChdId + '</td>' +
    							'<td>' + pichd.orderItemQtyId + '</td>' +
    							'<td>' + pichd.orderId + '</td>' +						
    							'<td>' + pichd.itemName + '</td>' +	
    							'<td class="qty">' + pichd.itemQty + '</td>' +	
    				    		//'<td class="qty"><input type="text" value='+ pichd.itemQty + ' size="3px" readonly/>' + '<td>'+    		
    				    		//'<td class="qtysaved"><input type="text" value=' + pichd.pIQtySaved + ' size="3px" readonly/>' + '</td>' +
    				    		//'<td class="qtysaved">' + pichd.pIQtySaved  + '</td>' +	
    				    		'<td class="editqty" id="setqty"><input type="text" name="editqty" class="test" id="editqty" value=' + (pichd.pIQtySaved) + ' onChange="updatePrice()" size="3px"/>' + '</td>' +
    				    		//'<td class="qty" ><input type="text" value=' + (pichd.itemQty) + ' size="3px" readonly/>' + '</td>' +
    				    		//'<td class="qtysaved"><input type="text" value=' + (pichd.pIQtySaved) + ' size="3px" readonly/>' + '</td>' +
    				    		//'<td class="editqty" id="setqty"><input type="text" name="editqty" class="test" id="editqty" value=' + (pichd.itemQty - pichd.pIQtySaved) + ' onChange="updatePrice()" size="3px"/>' + '</td>' +
    				    		'<td class="" >' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
    				    		
    				    	    //'<td class="editqty" id="setqty" contentEditable>' + (pichd.itemQty - pichd.pIQtySaved) + '</td>' +
    				    		'<td>' + pichd.uOMName + '</td>' +
    				    		'<td hidden class="uOMId">' + pichd.uOMId + '</td>' +
    				    		'<td class="itemrate">' + pichd.itemRate + '</td>' +
    				    		
    				    	//	'<td class="itemrate">' + pichd.currencyName + '</td>' +
    				    	
    				    		
    				    		 '<td class="currencyList" ><select class="form-control" id="currencyId">' +
    								'<option value='+pichd.currencyId+'>'+pichd.currencyName+'</option>';
    								
    						$.each(pichd.modelCurrencyList, function(j,currency) {
    							piChdRow=piChdRow +'<option value=' + currency.currencyId + '>'+currency.currencyName+ '</option>';
    				
    				
    				});			
    			
    																								
    						piChdRow=piChdRow + '/>' +
    								 
    			    '</select></td>' +	
    				   		
    				    		
    				    		'<td>' + pichd.commissionPerUOM + '</td>' +
    				    		'<td class="pichdtotalsum">' + (pichd.itemQty * pichd.itemRate) + '</td>' +
    				    		//'<td class="pichdtotalsum"><input type="text" id="pichdtotalsum" value=' + pichd.itemQty * pichd.itemRate + ' size="3px" readonly />' + '</td>' +
    				    		'<td>' + pichd.commissionTotal + '</td>' +
    				    		'<td class="removerowpichd"> <button class=" btn btn-danger" >Remove</button>' +'</td>'
    				    		
    		    									'</tr>';
    		    									
    		    				 $('#pichdTable tbody').append(piChdRow);					  	
    	     		      
    	     		      });        // each
           }
             
    	 });
      			 
      			 
    	   }
    	   
	        }
           
    	   
       });
       
       </script>
       
       
     
   <!-- ================================================End====================================================== -->    
            
     <script type="text/javascript" th:inline="javascript">
		
		var now = new Date();
		var day = ("0" + now.getDate()).slice(-2);
		var month = ("0" + (now.getMonth() + 1)).slice(-2);
	
	    var today = now.getFullYear()+"-"+(month)+"-"+(day) ;
	    
	    document.getElementById('piDate').value = today;
       // document.getElementById('enddate').value=today;
       
       
	</script>
	
	
	
            
</body>

</html>